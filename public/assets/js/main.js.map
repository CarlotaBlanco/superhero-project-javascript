{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst inputSearch = document.querySelector('.js-input');\nconst buttonSearch = document.querySelector('.js-button');\nconst resultsList = document.querySelector('.js-listElements');\nconst resetButton = document.querySelector('.js-reset');\nconst favouritesList = document.querySelector('.js-favourites');\n\nlet heroes = [];\nlet favourites = [];\n\nfunction validateInput() {\n  if (inputSearch.value === '') {\n    alert('Debes rellenar todos los campos');\n  } else {\n    getApiData();\n  }\n}\n\nfunction getApiData() {\n  fetch(\n    `https://www.superheroapi.com/api.php/7559222877485453/search/${inputSearch.value}`\n  )\n    .then((response) => response.json())\n    .then((data) => {\n      heroes = data.results;\n      renderResults();\n    });\n}\n\nfunction renderResults() {\n  let html = '';\n  if (heroes === undefined) {\n    html = `nooooo`;\n  } else {\n    for (const heroe of heroes) {\n      let classFavouriteBackground = '';\n      const favouriteFoundIndex = favourites.findIndex((fav) => {\n        return fav.id === heroe.id;\n      });\n\n      if (favouriteFoundIndex !== -1) {\n        classFavouriteBackground = 'heroes__fav';\n      } else {\n        classFavouriteBackground = '';\n      }\n\n      html += `<div class=\"js-listresults  col-lg-3 col-md-3 col-xs-12 ${classFavouriteBackground}\" id=\"${heroe.id}\">`;\n      html += `<div class=\"card\">`;\n      html += `<img class=\"card-img-top\" src=\"${heroe.image.url}\" alt=\"Superheroe profile pic\"/>`;\n      html += `<div class=\"card-body\">`;\n      html += `<p>${heroe.name}</p>`;\n      html += `</div>`;\n      html += `</div>`;\n      html += `</div>`;\n    }\n  }\n  resultsList.innerHTML = html;\n  cardListener();\n}\nfunction cardListener() {\n  const cardLi = document.querySelectorAll('.js-listresults');\n  for (const card of cardLi) {\n    card.addEventListener('click', addFavourites);\n  }\n}\n\nfunction addFavourites(event) {\n  const idCard = event.currentTarget.id;\n  const favouriteFound = heroes.find((fav) => {\n    return fav.id === idCard;\n  });\n  const favouriteFoundIndex = favourites.findIndex((fav) => {\n    return fav.id === idCard;\n  });\n  if (favouriteFoundIndex === -1) {\n    favourites.push(favouriteFound);\n  } else {\n    favourites.splice(favouriteFoundIndex, 1);\n  }\n\n  renderFavourites();\n  renderResults();\n}\n\nfunction renderFavourites() {\n  let html = '';\n  for (const favourite of favourites) {\n    html += `<div class=\"js-favourite_results col-3\" id=\"${favourite.id}\">`;\n    html += `<img class=\"card_image\" src=\"${favourite.image.url}\" alt=\"Superheroe profile pic\"/>`;\n    html += `<div class=\"listresults__item--text\">`;\n    html += `<p>${favourite.name}</p>`;\n    html += `</div>`;\n    html += `</div>`;\n  }\n  favouritesList.innerHTML = html;\n  favouritesListener();\n}\n\nfunction favouritesListener() {\n  const favouriteLi = document.querySelectorAll('.js-favourite_results');\n  for (const favourite of favouriteLi) {\n    favourite.addEventListener('click', addFavourites);\n  }\n}\n\nfunction resetResults() {\n  heroes = [];\n  resultsList.innerHTML = '';\n  favouritesList.innerHTML = '';\n  inputSearch.value === '';\n}\n\nfunction handleClickSearch(event) {\n  event.preventDefault();\n  validateInput();\n}\n\nbuttonSearch.addEventListener('click', handleClickSearch);\nresetButton.addEventListener('click', resetResults);\n"]}